<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asteroid Sorting Game</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
            background-image: url('https://github.com/LB17GO/DUWITHack/raw/main/Sprites/Backgrounds/Asset%20Pack%20-%20space%20bgs/Assets/Blue%20Version/layered/bffede1d81ebe6ddb2eb3033dc86ac68.gif'); 
            background-size: cover; 
            background-repeat: no-repeat; 
            color: white; /* Change text color for better visibility */
            display: flex; /* Use flexbox for centering */
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
            height: 100vh; /* Full viewport height */
            flex-direction: column; /* Stack elements vertically */
            margin: 0; /* Remove default margin */
        }
        #bins { display: flex; justify-content: space-around; margin: 20px; }
        .bin { width: 100px; height: 100px; border: 2px solid black; display: inline-block; margin: 5px;}
        #red { background-color: rgba(255, 0, 0, 0.7); } /* Semi-transparent for visibility */
        #blue { background-color: rgba(0, 0, 255, 0.7); }
        #green { background-color: rgba(0, 255, 0, 0.7); }
        #yellow { background-color: rgba(255, 255, 0, 0.7); }
        #purple { background-color: rgba(128, 0, 128, 0.7); }
        #orange { background-color: rgba(255, 165, 0, 0.7); }
        #asteroid {
            width: 100px; /* Fixed size */
            height: 100px; /* Fixed size */
            margin: 20px; 
            cursor: pointer; 
            display: none; 
            animation: fadeIn 1.5s; /* Animation for appearance */
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        #gameOver { display: none; }
        #timer { position: absolute; top: 10px; right: 10px; }
    </style>
</head>
<body>
    <h1>Asteroid Sorting Game</h1>
    <button id="startBtn">Start Now</button>
    <div id="timer">Time left: 60 seconds</div>
    <div id="bins">
        <div id="red" class="bin" data-color="red"></div>
        <div id="blue" class="bin" data-color="blue"></div>
        <div id="green" class="bin" data-color="green"></div>
        <div id="yellow" class="bin" data-color="yellow"></div>
        <div id="purple" class="bin" data-color="purple"></div>
        <div id="orange" class="bin" data-color="orange"></div>
    </div>
    <img id="asteroid" src="" alt="Asteroid" />
    <div id="gameOver">
        <h2>Game Over!</h2>
        <p id="result"></p>
        <button id="playAgainBtn">Play Again</button>
        <button id="goBackBtn">Go Back to the Rocket</button>
    </div>

    <script>
        const asteroids = [
            { color: 'red', image: 'https://github.com/LB17GO/DUWITHack/blob/main/Sprites/RED.png?raw=true' },
            { color: 'blue', image: 'https://github.com/LB17GO/DUWITHack/blob/main/Sprites/BLUE.png?raw=true' },
            { color: 'green', image: 'https://github.com/LB17GO/DUWITHack/blob/main/Sprites/GREEN.png?raw=true' },
            { color: 'yellow', image: 'https://github.com/LB17GO/DUWITHack/blob/main/Sprites/YELLOW.png?raw=true' },
            { color: 'purple', image: 'https://github.com/LB17GO/DUWITHack/blob/main/Sprites/PURPLE.png?raw=true' },
            { color: 'orange', image: 'https://github.com/LB17GO/DUWITHack/blob/main/Sprites/ORANGE.png?raw=true' },
        ];

        let timer;
        let timeLeft = 60;
        let correctCount = 0;
        let currentAsteroidIndex = 0;

        document.getElementById('startBtn').addEventListener('click', startGame);
        document.getElementById('playAgainBtn').addEventListener('click', resetGame);
        document.getElementById('goBackBtn').addEventListener('click', goBackToRocket);

        function startGame() {
            resetGame();
            document.getElementById('bins').style.display = 'flex';
            startTimer();
            showAsteroid();
        }

        function resetGame() {
            timeLeft = 60;
            correctCount = 0;
            currentAsteroidIndex = 0;
            document.getElementById('timer').innerText = `Time left: ${timeLeft} seconds`;
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('asteroid').style.display = 'none';
            document.getElementById('startBtn').style.display = 'none';
        }

        function showAsteroid() {
            if (currentAsteroidIndex < asteroids.length) {
                const asteroid = asteroids[currentAsteroidIndex];
                const asteroidImg = document.getElementById('asteroid');
                asteroidImg.src = asteroid.image; // Add the correct path to your images
                asteroidImg.dataset.color = asteroid.color;
                asteroidImg.style.display = 'block';
                asteroidImg.classList.add('fade-in');
                asteroidImg.draggable = true;
                asteroidImg.addEventListener('dragstart', dragStart);
            }
        }

        function dragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.dataset.color);
        }

        const bins = document.querySelectorAll('.bin');
        bins.forEach(bin => {
            bin.addEventListener('dragover', dragOver);
            bin.addEventListener('drop', drop);
        });

        function dragOver(e) {
            e.preventDefault();
        }

        function drop(e) {
            e.preventDefault();
            const color = e.dataTransfer.getData('text/plain');
            const binColor = e.target.dataset.color;

            if (color === binColor) {
                alert('Correct!');
                document.getElementById('asteroid').style.display = 'none';
                correctCount++;
                currentAsteroidIndex++;
                showAsteroid();
                checkGameOver();
            } else {
                alert('Try again!');
            }
        }

        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').innerText = `Time left: ${timeLeft} seconds`;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    endGame('Time\'s up!');
                }
            }, 1000);
        }

        function checkGameOver() {
            if (correctCount === asteroids.length) {
                clearInterval(timer);
                endGame(`Well done! Time taken: ${60 - timeLeft} seconds`);
            }
        }

        function endGame(message) {
            document.getElementById('gameOver').style.display = 'block';
            document.getElementById('result').innerText = message;
            document.getElementById('bins').style.display = 'none';
            document.getElementById('asteroid').style.display = 'none';
        }

        function goBackToRocket() {
            // Insert go back to the rocket actions
            alert("Going back to the rocket!");
            // Redirect to another page
        }
    </script>
</body>
</html>